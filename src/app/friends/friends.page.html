<app-header title="Amis" />

<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Ajouter un ami</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label position="floating">Pseudo</ion-label>
        <ion-input [(ngModel)]="friendDisplayName"></ion-input>
      </ion-item>
      <ion-button expand="block" (click)="addFriend()"
        >Envoyer la requête</ion-button
      >
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Demandes d'ami</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let request of pendingRequests">
          <ion-label>
            <h3>{{ request.display_name }}</h3>
            <p>{{ request.isSent ? 'Envoyée' : 'Reçue' }}</p>
          </ion-label>
          <ion-button
            slot="end"
            *ngIf="!request.isSent"
            (click)="acceptFriend(request.id)"
            >Accept</ion-button
          >
        </ion-item>
        <ion-item *ngIf="pendingRequests.length === 0">
          <ion-label>Pas de demande en attente</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Liste d'amis</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let friend of friends">
          <ion-label>{{ friend.display_name }}</ion-label>
        </ion-item>
        <ion-item *ngIf="friends.length === 0">
          <ion-label>Pas encore d'amis</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer>

</ion-footer>
